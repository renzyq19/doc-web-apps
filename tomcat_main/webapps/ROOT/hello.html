<html>
  <head>
    <title>Test page.</title>
  </head>
  <body>

    <div id="u_info"> </div>
    <button type="button" onclick="startRedir()">
      Play Game
    </button>
    <button type="button" id='login'>
      Login
    </button>

    <div id="test"></div>
    
    <script>
      function startRedir() {
        //checks if the "username" is set
        //and changes page location accordingly
        
        var login = getCookie("username");
        if(login == null) {
          document.location.href="/login.html"; 
        }
        else {
          document.getElementById("test").innerHTML 
              += "Username set to " + login + "<br>";
          var loginButton = document.getElementById("login");
          loginButton.style.visibility = 'hidden';
          loginButton.style.display = 'none';
        }
      }

      function setUserInfo() {
        var login = getCookie("username");
        if(login == null) {
          document.getElementById("u_info").innerHTML = "User: guest";
        } else {
          document.getElementById("u_info").innerHTML = "User: " + login;
        }
       
      }

      function getCookie(c_name) {
        var cookies = document.cookie;
        var index = cookies.indexOf(" " + c_name + "=");
        if(index == -1) { <!-- Cookie might be at the beginning -->
          index = cookies.indexOf(c_name + "=");
          if(index == -1) {
            return null;
          }
        }
        var start_idx = cookies.indexOf('=',index)+1;
        var end_idx = cookies.indexOf(';',index);
        if(end_idx == -1) {
          end_idx = cookies.length;
        }
        return cookies.substring(start_idx, end_idx);
      }
    </script>
  </body>
</html>
